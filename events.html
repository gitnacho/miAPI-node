<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <title>Miapi-node por Nacho Pacheco</title>
  </head>
  <body>
    <header>
      <div class="container">
        <h1>Miapi-node</h1>
        <h2>Mi interpretación de la API de Node v0.8.8</h2>
      </div>
    </header>
    <div class="container">
      <section id="main_content">
<h1><abbr title="Events">Eventos</abbr></h1>

<pre><code>Estabilidad: 4 — API congelada
</code></pre>

<!-- type=module -->

<p>En Node muchos objetos emiten eventos: un <code>net.Server</code> emite un evento al abrir un archivo. Todos los objetos que emiten eventos son instancias de <abbr title="events"><code>eventos</code></abbr><code>.EventEmitter</code>.
Puedes acceder a este módulo invocando a: </p>

<pre><code>var eventos = require('events');
</code></pre>

<p>Típicamente, los nombres de evento están representados por una cadena con mayúsculas intercaladas, sin embargo, no hay restricciones estrictas en ellas, dado que cualquier cadena será aceptada.</p>

<p>Puedes adjuntar funciones a objetos, para ser ejecutadas cuando se emita un evento. Estas funciones se conocen como <em>escuchas</em>.</p>

<h2>Clase: <abbr title="events"><code>eventos</code></abbr><code>.EventEmitter</code></h2>

<p>Para acceder a la clase <code>EventEmitter</code> usa:</p>

<pre><code>var emisor = require('events').EventEmitter
</code></pre>

<p>Cuando una instancia de <code>EventEmitter</code> experimenta un error, la acción típica consiste en emitir un evento <code>'error'</code>.  En Node, los eventos de error se tratan como un caso especial.
Si no hay escucha para él, entonces la acción predeterminada es imprimir el seguimiento de la pila y salir del programa.</p>

<p>Todos los escuchas.</p>

<h3><code>emisor.addListener(</code><abbr title="event"><code>evento</code></abbr><code>,</code> <abbr title="listener"><code>escucha</code></abbr><code>)</code></h3>

<h3><code>emisor.on(</code><abbr title="event"><code>evento</code></abbr><code>,</code> <abbr title="listener"><code>escucha</code></abbr><code>)</code></h3>

<p>Añade un escucha al final del arreglo de escuchas del evento especificado.</p>

<pre><code>servidor.on('connection', function (flujo) {
  console.log('¡alguien se ha conectado!');
});
</code></pre>

<h3><code>emisor.once(</code><abbr title="event"><code>evento</code></abbr><code>,</code> <abbr title="listener"><code>escucha</code></abbr><code>)</code></h3>

<p>Agrega un escucha <strong>fugaz</strong> para el evento. Este escucha, es invocado únicamente la siguiente vez que se emita el evento, tras la cual se elimina.</p>

<pre><code>servidor.once('connection', function (flujo) {
  console.log('¡Ah, tenemos nuestro primer usuario!');
});
</code></pre>

<h3><code>emisor.removeListener(</code><abbr title="event"><code>evento</code></abbr><code>,</code> <abbr title="listener"><code>escucha</code></abbr><code>)</code></h3>

<p>Quita un evento especificado.
<strong>Precaución</strong>: esta cambia los índices del arreglo en la matriz de escuchas detrás del escucha.</p>

<pre><code>var retrollamada = function (flujo) {
  console.log('¡alguien se ha conectado!');
};
servidor.on('connection', retrollamada);
// ...
servidor.removeListener('connection', retrollamada);
</code></pre>

<h3><code>emisor.removeAllListeners([</code><abbr title="event"><code>evento</code></abbr><code>])</code></h3>

<p>Quita todos los escuchas, o los relacionados al evento especificado.</p>

<h3><code>emisor.setMaxListeners(</code><abbr title="n"><code>cantidad</code></abbr><code>)</code></h3>

<p>De manera predeterminada <code>EventEmitters</code> imprimirá una notificación si se añaden más de 10 escuchas a un evento en particular. Se trata de una utilidad predeterminada que te ayuda a encontrar fugas de memoria.
Obviamente, no todos los emisores se deben limitar a 10. Esta función te permite incrementarlos. Ajústala a cero para ilimitados.</p>

<h3><code>emisor.listeners(</code><abbr title="event"><code>evento</code></abbr><code>)</code></h3>

<p>Devuelve un evento especificado.</p>

<pre><code>servidor.on('connection', function (flujo) {
  console.log('¡alguien se ha conectado!');
});
console.log(util.inspect(servidor.listeners('connection'))); // [ [Función] ]
</code></pre>

<h3><code>emisor.emit(</code><abbr title="event"><code>evento</code></abbr><code>, [arg1], [arg2], [...])</code></h3>

<p>Ejecuta cada uno de los escuchas en orden con los argumentos proporcionados.</p>

<h3>Evento: <code>'newListener'</code></h3>

<ul>
<li><abbr title="event"><code>evento</code></abbr> {<abbr title="String">Cadena</abbr>} El nombre del evento</li>
<li><abbr title="listener"><code>escucha</code></abbr> {<abbr title="Function">Función</abbr>} La función controladora del evento</li>
</ul>

<p>Este evento se emite al momento de agregar un nuevo escucha.</p>

      </section>
    </div>
  </body>
</html>
